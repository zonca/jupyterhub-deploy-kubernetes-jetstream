ngshare:
  hub_api_token: REPLACE_WITH_A_LONG_RANDOM_TOKEN
  admins:
    - admin_username
  # If ngshare is not in the same namespace as JupyterHub, set this:
  # hub_api_url: http://hub.YOUR_JHUB_NAMESPACE.svc.cluster.local:8081/hub/api

# If you see "sqlite3.OperationalError: unable to open database file",
# uncomment the initContainer below to fix PVC permissions.
#
# deployment:
#   initContainers:
#     - name: fix-permissions
#       image: busybox:1.36
#       securityContext:
#         runAsUser: 0
#         runAsNonRoot: false
#       command:
#         - sh
#         - -c
#         - |
#           chown -R 65535:1000 /srv/ngshare && chmod -R 0770 /srv/ngshare
#       volumeMounts:
#         - name: ngshare-pvc
#           mountPath: /srv/ngshare

# Ensure the ngshare sqlite DB is writable on the PVC
deployment:
  initContainers:
    - name: fix-permissions
      image: busybox:1.36
      securityContext:
        runAsUser: 0
        runAsNonRoot: false
      command:
        - sh
        - -c
        - |
          chown -R 65535:1000 /srv/ngshare && chmod -R 0770 /srv/ngshare
      volumeMounts:
        - name: ngshare-pvc
          mountPath: /srv/ngshare
